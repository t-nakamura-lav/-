<div class="container">
  <div class="row">
    <div class="col-md-4 text-center" style="margin: 15px 0 15px 0;">
      <h5 style="background-color: #eeeeee;">tweet投稿一覧</h5>
    </div>
  </div>

  <% @tweets.each do |tweet| %>
  <div class="row">
    <div class="col-md-3 text-right">
      <%= link_to user_path(tweet.user) do %>
        <%= attachment_image_tag tweet.user, :profile_image, :fill, 100, 100, format: 'jpeg',fallback: "no_image.jpg" ,class: "rounded-circle" %> </p>
      <% end %>
    </div>

    <div class="col-md-8 text-left">
      <table class='table table-borderless '>
        <thead>
          <tr>
            <th style="width: 50%"><%= link_to tweet.user.name, user_path(tweet.user) %></th>
            <th style="width: 50%"><%= tweet.created_at.strftime('%Y/%m/%d %H:%M') %></th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td><%= tweet.challenge %></td>
            <td><%= tweet.hour_attribute %>時間　<%= tweet.minute_attribute %>分</td>
          </tr>
        </tbody>

        <tbody>
          <tr>
            <td colspan="2"><%= tweet.tweet %></td>
          </tr>
        </tbody>

        <tbody>
          <tr>
            <td colspan="2"><% if tweet.images.attached? %>
                  <% tweet.images.each do |image| %>
                    <%= image_tag image.variant(resize:'200x200') %>
                  <% end %>
                <% end %>
            </td>
          </tr>
        </tbody>

        <tbody>
          <tr>
            <td>
              <%= link_to tweet_path(tweet) do %>
                <p class="far fa-comment" style="color:#ff6f00 ;">
                <%= tweet.comments.count %> コメント</p>
              <% end %>
            </td>
            <td>
              <% if tweet.liked_by?(current_user) %>
              <p>
                <%= link_to tweet_likes_path(tweet), method: :delete do %>
                  <i class="fas fa-thumbs-up" style="color:#dd0077 ;">
                  <%= tweet.likes.count %> いいね</i>
                <% end %>
              </p>
              <% else %>
              <p>
                <%= link_to tweet_likes_path(tweet), method: :post do %>
                  <i class="far fa-thumbs-up">
                  <%= tweet.likes.count %> いいね</i>
                <% end %>
              </p>
              <% end %>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <% end %>
  <%= paginate @tweets %>
</div>
